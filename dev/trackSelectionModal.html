<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>IGV</title>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

    <!-- CSS -->
    <link rel="stylesheet" href="../css/app.css"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- Bootstrap 5.3 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Bootstrap 5.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>


</head>

<body>


<script type="module">

    import createTrackSelectionModal from "../js/widgets/trackSelectionModal.js"
    import hubJson from "./hubJson.js"
    import registryJson from "./registryJson.js"


    // Example usage
    const sections = [
        {
            label: 'Section 1',
            tracks: Array.from({length: 20}, (_, i) => ({
                name: `Option ${i + 1}`,
                checked: i % 2 === 0,
                disabled: i % 2 === 0,
                url: `https://example.com/section1/option${i + 1}`
            }))
        },
        {
            label: 'Section 2',
            children: [
                {
                    label: 'Section 2.1',
                    tracks: Array.from({length: 20}, (_, i) => ({
                        name: `Option ${i + 1}`,
                        infoURL: `https://example.com/info${i + 1}`,
                        checked: i === 0,
                        url: `https://example.com/section2/option${i + 1}`
                    }))
                },
                {
                    label: 'Section 2.2',
                    tracks: Array.from({length: 20}, (_, i) => ({
                        name: `Option ${i + 1}`,
                        infoURL: `https://example.com/info${i + 21}`,
                        url: `https://example.com/section2/option${i + 1}`
                    }))
                }
            ]
        },
        {
            label: 'Section 3',
            tracks: Array.from({length: 20}, (_, i) => ({
                name: `Option ${i + 1}`,
                infoURL: `https://example.com/info${i + 41}`,
                url: `https://example.com/section3/option${i + 1}`
            }))
        }
    ]

    const description = '<div class="text-muted">Additional Header Content</div>'

    const okHandler = (selectedTracks) => {
        console.log('OK clicked with selected tracks:', selectedTracks)
    }

    const id = 'customModal'
    //
    // const modal = createTrackSelectionModal({
    //     id,
    //     title: registryJson[0]["label"],
    //     sections: registryJson,
    //     description: registryJson[0]["description"],
    //     okHandler,
    //     cancelHandler: () => {
    //         console.log('Cancel clicked')
    //         modal.hide()
    //     }
    // })

    const modal = createTrackSelectionModal({
        id,
        title: "hub",
        sections: hubJson,
        description: "<div class='text-muted'>Additional Header Content</div>",
        okHandler,
        cancelHandler: () => {
            console.log('Cancel clicked')
            modal.hide()
        }
    })

    modal.show()


</script>

</body>

</html>
