<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>IGV</title>

  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/fontawesome/all.css">

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.css">

  <!-- CSS -->
  <link rel="stylesheet" href="css/app.css">

  <!-- Bootstrap 5.3 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <!-- Bootstrap 5.3 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

  <!-- Circular View -->
  <script src="https://unpkg.com/react@16.14.0/umd/react.development.js" defer></script>
  <script src="https://unpkg.com/react-dom@16.14.0/umd/react-dom.development.js" defer></script>
  <script src="https://unpkg.com/@jbrowse/react-circular-genome-view@1.6.9/dist/react-circular-genome-view.umd.production.min.js" defer></script>

  <!-- Datatables JS -->
  <script src="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.js"></script>

  <!-- Google Platform JS -->
  <script src="https://apis.google.com/js/platform.js"></script>

  <!-- Google GSI -->
  <script src="https://accounts.google.com/gsi/client"></script>

  <script src="./igvwebConfig-private.js"></script>

  <script type="module" src="js/app.js"></script>


</head>

<body class="d-flex-column">

<nav class="navbar fixed-top py-0 navbar-expand-sm navbar-dark bg-dark">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#igv-app-navbar-navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div id="igv-app-navbar-navigation" class="collapse navbar-collapse">
    <ul class="navbar-nav me-auto">
      <!-- Genome -->
      <li class="nav-item px-3">
        <div class="dropdown">
          <a id="igv-app-genome-dropdown-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Genome
          </a>
          <div id="igv-app-genome-dropdown-menu" class="dropdown-menu">
            <!-- local file -->
            <label class="dropdown-item btn btn-default btn-file">
              <div class="igv-app-dropdown-item-cloud-storage">
                <div>Local File ...</div>
                <div>
                  <input id="igv-app-dropdown-local-genome-file-input" type="file" name="file" multiple style="display: none;">
                </div>
              </div>
            </label>
            <!-- Dropbox -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-dropbox-genome-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Dropbox</div>
                <div><img id="igv-app-genome-dropbox-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- Google Drive -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-google-drive-genome-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Google Drive</div>
                <div><img id="igv-app-genome-google-drive-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- URL -->
            <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#igv-app-genome-from-url-modal">
              URL ...
            </button>
            <!-- Genark (track hubs) -->
            <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#igv-app-genome-genark-modal">
              UCSC GenArk ...
            </button>
            <div id="igv-app-genome-dropdown-divider" class="dropdown-divider"></div>
          </div>
        </div>
      </li>
      <!-- Tracks -->
      <li class="nav-item px-3">
        <div id="igv-app-track-dropdown" class="dropdown">
          <a id="igv-track-dropdown-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Tracks
          </a>
          <div id="igv-app-track-dropdown-menu" class="dropdown-menu">
            <!-- local file -->
            <label class="dropdown-item btn btn-default btn-file">
              <div class="igv-app-dropdown-item-cloud-storage">
                <div>Local File ...</div>
                <div>
                  <input id="igv-app-dropdown-local-track-file-input" type="file" name="file" multiple style="display: none;">
                </div>
              </div>
            </label>
            <!-- Dropbox -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-dropbox-track-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Dropbox</div>
                <div><img id="igv-app-track-dropbox-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- Google Drive -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-google-drive-track-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Google Drive</div>
                <div><img id="igv-app-track-google-drive-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- URL -->
            <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#igv-app-track-from-url-modal">
              URL ...
            </button>
            <div id="igv-app-annotations-section" class="dropdown-divider"></div>
          </div>
        </div>
      </li>
      <!-- Sample Info File -->
      <li class="nav-item px-3">
        <div id="igv-app-sample-info-dropdown" class="dropdown">
          <a id="igv-app-sample-info-dropdown-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Sample Info
          </a>
          <div id="igv-app-sample-info-dropdown-menu" class="dropdown-menu">
            <!-- local file -->
            <label class="dropdown-item btn btn-default btn-file">
              <div class="igv-app-dropdown-item-cloud-storage">
                <div>Local File ...</div>
                <div>
                  <input id="igv-app-sample-info-dropdown-local-track-file-input" type="file" name="file" multiple style="display: none;">
                </div>
              </div>
            </label>
            <!-- Dropbox -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-dropbox-sample-info-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Dropbox</div>
                <div><img id="igv-app-sample-info-dropbox-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- Google Drive -->
            <div class="dropdown-item">
              <div id="igv-app-dropdown-google-drive-sample-info-file-button" class="igv-app-dropdown-item-cloud-storage">
                <div>Google Drive</div>
                <div><img id="igv-app-sample-info-google-drive-button-image" width="18" height="18"></div>
                <div>...</div>
              </div>
            </div>
            <!-- URL -->
            <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#igv-app-sample-info-from-url-modal">
              URL ...
            </button>
          </div>
        </div>
      </li>
      <!-- Session -->
      <li class="nav-item px-3">
        <div class="dropdown">
          <a id="igv-app-session-dropdown-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Session
          </a>
          <div id="igv-session-dropdown-menu" class="dropdown-menu">
            <!-- Load local session file -->
            <label class="dropdown-item btn btn-default btn-file">
              <div class="igv-app-dropdown-item-cloud-storage">
                <div>Local File ...</div>
                <div>
                  <input id="igv-app-dropdown-local-session-file-input" type="file" name="file" style="display: none;">
                </div>
              </div>
            </label>
            <!-- Session URL -->
            <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#igv-app-session-url-modal">
              Load URL ...
            </button>

            <!-- Session List -->
            <div id="igv-session-list-divider" class="dropdown-divider"></div>

            <div class="dropdown-divider"></div>
            <!-- Save local session file -->
            <button class="dropdown-item" type="button" id="save-session-button" data-bs-toggle="modal" data-bs-target="#igv-app-session-save-modal">
              Save ...
            </button>
          </div>
        </div>
      </li>
      <!-- Share (generate URL) -->
      <li class="nav-item px-3">
        <div>
          <a id="igv-app-share-button" href="#" data-bs-toggle="modal" data-bs-target="#igv-app-share-modal">
            Share
          </a>
        </div>
      </li>
      <!-- Bookmark -->
      <li class="nav-item px-3">
        <div>
          <a id="igv-app-bookmark-button" href="#">
            Bookmark
          </a>
        </div>
      </li>
      <!-- Save Image. SVG or PNG -->
      <li class="nav-item px-3">
        <div class="dropdown">
          <a id="igv-app-save-image-dropdown-button" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Save Image
          </a>
          <div id="igv-app-save-image-dropdown-menu" class="dropdown-menu">
            <!-- SVG -->
            <div class="dropdown-item">
              <a id="igv-app-save-svg-button" href="#" data-bs-toggle="modal" data-bs-target="#igv-app-svg-save-modal">
                Save as SVG ...
              </a>
            </div>
            <!-- PNG -->
            <div class="dropdown-item">
              <a id="igv-app-save-png-button" href="#" data-bs-toggle="modal" data-bs-target="#igv-app-png-save-modal">
                Save as PNG ...
              </a>
            </div>
          </div>
        </div>
      </li>
      <!-- Circular View -->
      <li id="igv-app-circular-view-nav-item" class="nav-item px-3" style="display: none;">
        <div id="igv-app-circular-view-dropdown" class="dropdown">
          <a id="igv-app-circular-view-dropdown-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Circular View
          </a>
          <div id="igv-app-circular-view-dropdown-menu" class="dropdown-menu">
            <button id="igv-app-circular-view-presentation-button" class="dropdown-item" type="button">
              Show
            </button>
            <button id="igv-app-circular-view-clear-chords-button" class="dropdown-item" type="button" disabled>
              Clear All
            </button>
            <button id="igv-app-circular-view-resize-button" class="dropdown-item" type="button" disabled data-bs-toggle="modal" data-bs-target="#igv-app-circular-view-resize-modal">
              Resize
            </button>
            <a id="igv-app-circular-view-example-button" class="dropdown-item" href="https://github.com/igvteam/igv-webapp/wiki/Circular-View" target="_blank">
              Documentation
            </a>
          </div>
        </div>
      </li>
      <!-- Help Menu -->
      <li class="nav-item px-3">
        <div id="igv-app-help-dropdown" class="dropdown">
          <a id="igv-app-help-button" class="dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
            Help
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="https://igv.org/doc/webapp/" target="_blank">Documentation</a>
            <a class="dropdown-item" href="https://igv.org/doc/webapp/#ExampleSessions" target="_blank">Example Sessions</a>
            <a class="dropdown-item" href="https://igv.org/doc/webapp/#WhatsNew/" target="_blank">What's New</a>
            <a class="dropdown-item" href="https://github.com/igvteam/igv-webapp" target="_blank">GitHub Repository</a>
            <a class="dropdown-item" href="https://groups.google.com/group/igv-help" target="_blank">User Forum</a>
            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#igv-app-help-about-modal">About IGV-Web</a>
            <a class="dropdown-item" href="https://igv.org/doc/privacy.html" target="_blank">Privacy Policy</a>
          </div>
        </div>
      </li>
    </ul>
    <!-- Google Authentication -->
    <div class="btn-group">
      <div class="btn-group dropstart" role="group">
        <div id="igv-google-drive-dropdown" class="dropdown">
          <button id="igv-google-drive-dropdown-toggle" type="button" class="btn dropdown-toggle" data-bs-toggle="dropdown" style="display: none;">
            <img src="img/google-drive-current.png" width="24" height="24">
          </button>
          <div class="dropdown-menu">
            <button id="igv-google-drive-sign-out-button" class="dropdown-item" type="button"></button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<main id="igv-main" role="main" class="container-fluid">

  <!-- JBrowser Circular Viewer Container -->
  <div id="igv-circular-view-container"
       style="position: absolute; top:200px; left:20px; width: fit-content; height: fit-content;z-index: 2048"></div>

  <!-- App container -->
  <div class="row">
    <div class="col-sm">
      <div id="igv-app-container">
      </div>
    </div>
  </div>

  <!-- Share URL Modal -->
  <div id="igv-app-share-modal" class="modal fade" tabindex="-1">

    <div class="modal-dialog">

      <div class="modal-content">

        <div class="modal-header">
          <div id="igv-app-share-input-modal-close-button" class="modal-title">Share</div>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

        </div>

        <div class="modal-body">

          <!-- copy URL section -->
          <div class="modal-body-section">
            <div class="container">

              <!-- Copy URL radio buttons -->
              <div id="igv-share-url-radio-pair-container" class="form-group">
                <div class="form-check form-check-inline">
                  <input type="radio" id="igv-share-short-url-radio" name="share-url-radio-pair" class="form-check-input">
                  <label class="form-check-label" for="igv-share-short-url-radio">Shortened URL</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" id="igv-share-long-url-radio" name="share-url-radio-pair" class="form-check-input" checked>
                  <label class="form-check-label" for="igv-share-long-url-radio">Long URL</label>
                </div>
              </div>

              <!-- Copy URL -->
              <div class="row g-0">
                <div class="col me-2">
                  <div class="input-group input-group-sm">
                    <input id="igv-app-share-input" type="text" class="form-control" placeholder="">
                  </div>
                </div>
                <div class="col-4">
                  <button id="igv-app-copy-link-button" class="btn btn-sm btn-outline-secondary" type="button">Copy Session URL</button>
                </div>
              </div>

              <!-- Embed iframe Button | Copy iframe Button -->
              <div class="row pt-4">
                <div class="col text-center">
                  <div class="d-flex justify-content-center">
                    <button id="igv-app-embed-button" type="button" class="btn btn-sm btn-outline-secondary me-2">Embeddable iframe</button>
                    <button id="igv-app-copy-iframe-button" type="button" class="btn btn-sm btn-outline-secondary">Copy iframe</button>
                  </div>
                </div>
              </div>

              <!-- Embed -->
              <div id="igv-app-embed-container" class="row">
                <div class="col form-group">
                  <textarea class="form-control" rows="4"></textarea>
                </div>
              </div>

              <!-- QR Code Button -->
              <div id="igv-app-qrcode-container" class="row pt-4">
                <div class="col">
                  <button id="igv-app-qrcode-button" type="button" class="btn btn-sm btn-outline-secondary">Create QR Code</button>
                </div>
              </div>

              <!-- QR Code -->
              <div class="row">
                <div id="igv-app-qrcode-image" class="col">
                </div>
              </div>

            </div>

          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- SVG save -->
  <div id="igv-app-svg-save-modal" class="modal fade igv-app-file-save-modal" tabindex="-1">

    <div class="modal-dialog modal-lg">

      <div class="modal-content">

        <div class="modal-header">

          <div id="igv-app-svg-save-modal-label" class="modal-title">
            <div>
              Save SVG File
            </div>
          </div>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <input class="form-control" type="text" placeholder="igv-app.svg">

          <div>
            Enter filename with .svg suffix
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">OK</button>
        </div>

      </div>

    </div>

  </div>

  <!-- PNG save -->
  <div id="igv-app-png-save-modal" class="modal fade igv-app-file-save-modal" tabindex="-1">

    <div class="modal-dialog modal-lg">

      <div class="modal-content">

        <div class="modal-header">

          <div id="igv-app-png-save-modal-label" class="modal-title">
            <div>
              Save PNG File
            </div>
          </div>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <input class="form-control" type="text" placeholder="igv-app.png">

          <div>
            Enter filename with .png suffix
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">OK</button>
        </div>

      </div>

    </div>

  </div>

  <!-- Help - About - Modal -->
  <div id="igv-app-help-about-modal" class="modal fade" tabindex="-1" aria-labelledby="igv-app-help-about-modal-label" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="igv-app-help-about-modal-label">About IGV-Web</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="igv-app-version"></div>
          <div id="igv-igvjs-version"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


</main>

<footer class="bg-light py-2 w-100">
  <div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center">
      <!-- Left-aligned logo -->
      <div class="d-flex align-items-center">
        <a href="https://igv.org" target="_blank" class="d-flex align-items-center">
          <img src="img/igv-logo-cooked-40x40.png" width="32" height="32" alt="IGV Logo">
          <span class="ms-2">igv.org</span>
        </a>
      </div>
      <!-- Right-aligned logos -->
      <div class="d-flex">
        <div id="igv-app-ucsd-logo" class="me-3">
          <a href="https://ucsd.edu/" target="_blank" title="University of California at San Diego">
            <img src="img/ucsd-logo.svg" width="123" height="24" alt="University of California at San Diego">
          </a>
        </div>
        <div id="igv-app-broad-logo">
          <a href="https://www.broadinstitute.org" target="_blank" title="Broad Institute home page">
            <img src="img/broad-institute-logo.svg" width="95" height="24" alt="Broad Institute logo">
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>

</body>

</html>
